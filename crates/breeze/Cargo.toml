[package]
name = "breeze"
version = "0.1.0"
edition = "2024"

[dependencies]
breeze-chunkers = { path = "../breeze-chunkers" }
arrow = { version = "55.1.0", features = ["prettyprint"] }
arrow_convert = "0.9.0"
lancedb = { version = "0.20.0" }
serde = { version = "1", features = ["derive"] }
serde_json = "1.0"
serde_arrow = "0.13.4"
uuid = { version = "1", features = ["v7", "serde", "zerocopy"] }
chrono = { version = "0.4", features = ["serde"] }
blake3 = { version = "1.8.2", features = ["serde"] }
tokio = { workspace = true }
futures-util = "0.3.31"
async-trait = "0.1.88"

# Embedding providers
async-openai = "0.28"
reqwest = { version = "0.12", features = ["json", "stream"] }


# Configuration and CLI
clap = { version = "4.5", features = ["derive"] }
config = "0.15"
toml = "0.8"

# Error handling
thiserror = "2.0"
anyhow = "1.0"

# Rate limiting and utilities
tokio-util = { version = "0.7", features = ["rt"] }
tokio-stream = "0.1"
async-stream = "0.3"
governor = "0.8"
reqwest-retry = "0.7"
reqwest-tracing = "0.5"
http = "1.2"
retry-policies = "0.4"
tower = "0.5"
rand = "0.8"

tracing.workspace = true
tracing-subscriber = { version = "0.3.19", features = ["env-filter", "fmt"] }

num_cpus = "1"

hyperpolyglot = "0.1.7"     # Language detection
infer = "0.19.0"            # File type detection
console-subscriber = "0.4.1"
embed_anything = { version = "0.6.4", features = ["ort"] }
ignore = { version = "0.4.23", features = ["simd-accel"] }
futures = "0.3.31"
flume = "0.11"
reqwest-middleware = { version = "0.4.2", features = ["http2", "json", "rustls-tls"] }


[dev-dependencies]
tempfile = "3.11"

[features]
default = []
cuda = ["embed_anything/cuda"]
cudnn = ["embed_anything/cudnn"]
mkl = ["embed_anything/mkl"]
accelerate = ["embed_anything/accelerate"]
metal = ["embed_anything/metal"]
flash-attn = ["embed_anything/flash-attn"]
